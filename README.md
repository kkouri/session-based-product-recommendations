# Master's Thesis project in Data Science at the Tampere University

Rule based session based recommendation system for e-commerce applications. The goal is to predict the products that a user will add to cart or purchase later in the session.

A session is a sequence of events that a user performs in a website with a maximum of 30 minute time window between subsequent events. The events can be views, add to carts, and purchases. 

Alot of inspiration was taken from the [OTTO Recommender Systems Dataset](https://github.com/otto-de/recsys-dataset). However, the project uses the [Retailrocket recommender system dataset](https://www.kaggle.com/datasets/retailrocket/ecommerce-dataset).


## Installation
To run scripts, you need to have Python 3 and Pipenv installed. Then, you can install the dependencies with:
```
pipenv sync
```

## Train/Test Split

Since we define a session differently than in the OTTO and Retailrocket datasets, we need to generate our own dataset out of the Retailrocket dataset. The script ``train_test_split.py`` parses the events generated by single users into multiple sessions based on the session definition described above.

Train/Test split is done in the same way as in the OTTO dataset by splitting the sessions by timestamp. We use the last two weeks of the dataset as the test set and the three weeks before that as the training set. Train sessions overlapping with the test period are trimmed to prevent information leakage.

Run the following command to generate the training and testing datasets:
```
pipenv run python -m src.data_generation.train_test_split --input-path 'data/events.csv' --output-path 'data/generated' --train-weeks 3 --test-weeks 2
```

Run the following command to split test set:
```
pipenv run python -m src.data_generation.testset_labels --test-set 'data/generated/test_set.csv' --output-path 'data/generated'
```

Run the following command to generate product category information for training:
```
pipenv run python -m src.data_generation.product_category_tree --train-set-path 'data/generated' --input-path 'data' --output-path 'data/generated' --train-weeks 3 --test-weeks 2
```